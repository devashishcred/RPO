using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Web;
using Rpo.ApiServices.Api.Controllers.JobDocument;
using Rpo.ApiServices.Model;
using Rpo.ApiServices.Model.Models;

namespace Rpo.ApiServices.Api.Tools
{
    public partial class GenerateJobDocuments
    {
        public static void GenerateLandmarksCertificateOfAppropriateness(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;

                            jobDocument.IdJobApplication = idJobApplication;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobApplication),
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobApplication);
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateNarrativeFireProtectionForm(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            //string jobDocumentFor = string.Empty;
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;

                            jobDocument.IdJobApplication = idJobApplication;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobApplication),
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobApplication);
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            //jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateObjection(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;

                            jobDocument.IdJobApplication = idJobApplication;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobApplication),
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobApplication);
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Type")
                        {
                            int idJobDocumentType = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;
                            JobDocumentType jobDocumentType = rpoContext.JobDocumentTypes.Where(x => x.Id == idJobDocumentType).FirstOrDefault();

                            documentDescription = documentDescription + (jobDocumentType != null ? "Type: " + jobDocumentType.Type : string.Empty);
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobDocumentType),
                                    ActualValue = jobDocumentType != null ? jobDocumentType.Type : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobDocumentType);
                                updateJobDocumentField.ActualValue = jobDocumentType != null ? jobDocumentType.Type : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Date: " + frontendFields.Value : string.Empty);

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateLetterOfCompletion(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;

                            jobDocument.IdJobApplication = idJobApplication;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobApplication),
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobApplication);
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateLandmarkCertificateOfNoEffect(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = idJobApplication != 0 ? Convert.ToString(idJobApplication) : null,
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = idJobApplication != 0 ? Convert.ToString(idJobApplication) : null;
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateSurvey(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Additional Description")
                        {
                            //documentDescription = documentDescription + (!string.IsNullOrEmpty(frontendFields.Value) ? "Additional Description: " + frontendFields.Value : string.Empty);
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Additional Description: " + frontendFields.Value : string.Empty);
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Type")
                        {
                            int idJobDocumentType = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;
                            JobDocumentType jobDocumentType = rpoContext.JobDocumentTypes.Where(x => x.Id == idJobDocumentType).FirstOrDefault();

                            documentDescription = documentDescription + (jobDocumentType != null ? "Type: " + jobDocumentType.Type : string.Empty);
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobDocumentType),
                                    ActualValue = jobDocumentType != null ? jobDocumentType.Type : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobDocumentType);
                                updateJobDocumentField.ActualValue = jobDocumentType != null ? jobDocumentType.Type : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateSewerSelfCertificationForm(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }

                    else
                    {
                        if (item.Field.FieldName == "Additional Description")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Optional Description: " + frontendFields.Value : string.Empty);
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateWorkmansCompensationInsuranceForm(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.
                 Where(x => x.IdJobDocument == idJobDocument).ToList();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                foreach (DocumentField item in documentFieldList)
                {
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int idJobApplication = frontendFields.Value != null ? Convert.ToInt32(frontendFields.Value) : 0;

                            jobDocument.IdJobApplication = idJobApplication;
                            JobApplication jobApplication = rpoContext.JobApplications.Where(x => x.Id == idJobApplication).FirstOrDefault();

                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(idJobApplication),
                                    ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty,
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(idJobApplication);
                                updateJobDocumentField.ActualValue = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
        }

        public static void GenerateProfessionalAndOwnerCertificationEasementAgreementOrRestrictiveDeclaration(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantEmail = string.Empty;
                string fillingRepresentativeEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string applicantLastName = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            string format = "MM/dd/yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = date.ToString(format),
                                    ActualValue = date.ToString(format)
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = date.ToString(format);
                                updateJobDocumentField.ActualValue = date.ToString(format);
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Printed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLastName,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLastName;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Professional Licence Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Printed 2")
                        {
                            string nameOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = nameOwner,
                                    ActualValue = nameOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = nameOwner;
                                updateJobDocumentField.ActualValue = nameOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date 2")
                        {
                            DateTime date = DateTime.Today;
                            string format = "MM/dd/yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = date.ToString(format),
                                    ActualValue = date.ToString(format)
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = date.ToString(format);
                                updateJobDocumentField.ActualValue = date.ToString(format);
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Applicant")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Owner")
                        {
                            string phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.WorkPhone : string.Empty;
                            if (phoneOwner == null || phoneOwner == "")
                            {
                                phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.MobilePhone : string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = phoneOwner,
                                    ActualValue = phoneOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = phoneOwner;
                                updateJobDocumentField.ActualValue = phoneOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email Owner")
                        {
                            string emailOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.Email : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = emailOwner,
                                    ActualValue = emailOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = emailOwner;
                                updateJobDocumentField.ActualValue = emailOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Filling Representative")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = fillingRepresentativeEmail,
                                    ActualValue = fillingRepresentativeEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = fillingRepresentativeEmail;
                                updateJobDocumentField.ActualValue = fillingRepresentativeEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Applicable Statutory")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name of Esament")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative Chk")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative Chk2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Phone Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                              jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantLastName) ? " | Applicant: " + applicantLastName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            Employee contact = Common.GetEmployeeInformation(applicantId);

                            string filingFullName = contact != null ? contact.FirstName + " " + contact.LastName : string.Empty;
                            string fillingRepresentativePhone = contact != null ? contact.WorkPhone : string.Empty;
                            fillingRepresentativeEmail = contact != null ? contact.Email : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(filingFullName) ? " | Filling Representative: " + filingFullName : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = fillingRepresentativePhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = fillingRepresentativePhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            string optionadesc = string.Empty;
                             optionadesc = frontendFields.Value;
                            
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(optionadesc) ? "Optional Description: " + optionadesc : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = optionadesc
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = optionadesc;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }

        public static void EditProfessionalAndOwnerCertificationEasementAgreementOrRestrictiveDeclaration(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantEmail = string.Empty;
                string fillingRepresentativeEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string applicantLastName = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            string format = "MM/dd/yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = date.ToString(format),
                                    ActualValue = date.ToString(format)
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = date.ToString(format);
                                updateJobDocumentField.ActualValue = date.ToString(format);
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Printed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLastName,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLastName;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Professional Licence Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Printed 2")
                        {
                            string nameOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = nameOwner,
                                    ActualValue = nameOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = nameOwner;
                                updateJobDocumentField.ActualValue = nameOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date 2")
                        {
                            DateTime date = DateTime.Today;
                            string format = "MM/dd/yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = date.ToString(format),
                                    ActualValue = date.ToString(format)
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = date.ToString(format);
                                updateJobDocumentField.ActualValue = date.ToString(format);
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Applicant")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Owner")
                        {
                            string phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.WorkPhone : string.Empty;
                            if (phoneOwner == null || phoneOwner == "")
                            {
                                phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.MobilePhone : string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = phoneOwner,
                                    ActualValue = phoneOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = phoneOwner;
                                updateJobDocumentField.ActualValue = phoneOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email Owner")
                        {
                            string emailOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.Email : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = emailOwner,
                                    ActualValue = emailOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = emailOwner;
                                updateJobDocumentField.ActualValue = emailOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Filling Representative")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = fillingRepresentativeEmail,
                                    ActualValue = fillingRepresentativeEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = fillingRepresentativeEmail;
                                updateJobDocumentField.ActualValue = fillingRepresentativeEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Phone Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                              jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantLastName) ? " | Applicant: " + applicantLastName : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            Employee contact = Common.GetEmployeeInformation(applicantId);

                            string fillingRepresentativePhone = contact != null ? contact.WorkPhone : string.Empty;
                            fillingRepresentativeEmail = contact != null ? contact.Email : string.Empty;
                            string fillingRepresentativeName = contact != null ? contact.FirstName + " " + contact.LastName : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(fillingRepresentativeName) ? " | Filling Representative: " + fillingRepresentativeName : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = fillingRepresentativePhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = fillingRepresentativePhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            string optionadesc = string.Empty;
                            optionadesc = frontendFields.Value;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(optionadesc) ? "Optional Description: " + optionadesc : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = optionadesc
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = optionadesc;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }
        public static void GenerateProfessionalAndOwnerCertification(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                string applicantEmail = string.Empty;
                string fillingRepresentativeEmail = string.Empty;
                string allName = string.Empty;
                string licenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - POC1-78391.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {

                            //string ownerName = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            //if (string.IsNullOrEmpty(allName))
                            //{
                            //    allName = ownerName;
                            //}
                            //else
                            //{
                            //    allName = allName + " | " + ownerName;
                            //}

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = allName,
                                    ActualValue = allName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = allName;
                                updateJobDocumentField.ActualValue = allName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Professional Licence Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseNumber,
                                    ActualValue = licenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = licenseNumber;
                                updateJobDocumentField.ActualValue = licenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Applicant")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Owner")
                        {
                            string phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.WorkPhone : string.Empty;
                            if (string.IsNullOrEmpty(phoneOwner))
                            {
                                phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.MobilePhone : string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = phoneOwner,
                                    ActualValue = phoneOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = phoneOwner;
                                updateJobDocumentField.ActualValue = phoneOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email Owner")
                        {
                            string emailOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.Email : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = emailOwner,
                                    ActualValue = emailOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = emailOwner;
                                updateJobDocumentField.ActualValue = emailOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Filling Representative")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = fillingRepresentativeEmail,
                                    ActualValue = fillingRepresentativeEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = fillingRepresentativeEmail;
                                updateJobDocumentField.ActualValue = fillingRepresentativeEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.FirstOrDefault(x => x.Id == applicantId);

                            string jobApplicationNumber = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = jobApplicationNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = jobApplicationNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            Employee employee = Common.GetEmployeeInformation(applicantId);

                            string fillingRepresentativeName = employee != null ? employee.FirstName + " " + employee.LastName : string.Empty;

                            if (string.IsNullOrEmpty(allName))
                            {
                                allName = fillingRepresentativeName;
                            }
                            else
                            {
                                allName = allName + " | " + fillingRepresentativeName;
                            }

                            string fillingRepresentativePhone = employee != null ? employee.WorkPhone : string.Empty;
                            fillingRepresentativeEmail = employee != null ? employee.Email : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(fillingRepresentativeName) ? " | Filling Representative: " + fillingRepresentativeName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = fillingRepresentativePhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = fillingRepresentativePhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            string ownerName = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            licenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                               jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            if (string.IsNullOrEmpty(allName))
                            {
                                allName = applicantName + (!string.IsNullOrEmpty(ownerName) ? " | " + ownerName : string.Empty);
                            }
                            else
                            {
                                allName = allName + " | " + applicantName;
                            }
                            string applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? " | Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            string optionaldesc = string.Empty;
                            optionaldesc = frontendFields.Value;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(optionaldesc) ? "Optional Description: " + optionaldesc : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = optionaldesc
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = optionaldesc;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }


        public static void EditProfessionalAndOwnerCertification(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.
                Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                string applicantEmail = string.Empty;
                string fillingRepresentativeEmail = string.Empty;
                string allName = string.Empty;
                string licenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - POC1-78391.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {

                            //string ownerName = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            //if (string.IsNullOrEmpty(allName))
                            //{
                            //    allName = ownerName;
                            //}
                            //else
                            //{
                            //    allName = allName + " | " + ownerName;
                            //}

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = allName,
                                    ActualValue = allName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = allName;
                                updateJobDocumentField.ActualValue = allName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Professional Licence Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseNumber,
                                    ActualValue = licenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = licenseNumber;
                                updateJobDocumentField.ActualValue = licenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Applicant")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Owner")
                        {
                            string phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.WorkPhone : string.Empty;
                            if (string.IsNullOrEmpty(phoneOwner))
                            {
                                phoneOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.MobilePhone : string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = phoneOwner,
                                    ActualValue = phoneOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = phoneOwner;
                                updateJobDocumentField.ActualValue = phoneOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email Owner")
                        {
                            string emailOwner = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.Email : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = emailOwner,
                                    ActualValue = emailOwner
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = emailOwner;
                                updateJobDocumentField.ActualValue = emailOwner;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Email Filling Representative")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = fillingRepresentativeEmail,
                                    ActualValue = fillingRepresentativeEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = fillingRepresentativeEmail;
                                updateJobDocumentField.ActualValue = fillingRepresentativeEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.FirstOrDefault(x => x.Id == applicantId);

                            string jobApplicationNumber = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = jobApplicationNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = jobApplicationNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Filling Representative")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            Employee employee = Common.GetEmployeeInformation(applicantId);

                            string fillingRepresentativeName = employee != null ? employee.FirstName + " " + employee.LastName : string.Empty;

                            if (string.IsNullOrEmpty(allName))
                            {
                                allName = fillingRepresentativeName;
                            }
                            else
                            {
                                allName = allName + " | " + fillingRepresentativeName;
                            }

                            string fillingRepresentativePhone = employee != null ? employee.WorkPhone : string.Empty;
                            fillingRepresentativeEmail = employee != null ? employee.Email : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(fillingRepresentativeName) ? " | Filling Representative: " + fillingRepresentativeName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = fillingRepresentativePhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = fillingRepresentativePhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            string ownerName = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            licenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                               jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            if (string.IsNullOrEmpty(allName))
                            {
                                allName = applicantName + (!string.IsNullOrEmpty(ownerName) ? " | " + ownerName : string.Empty);
                            }
                            else
                            {
                                allName = allName + " | " + applicantName;
                            }
                            string applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? " | Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            string optionaldesc = string.Empty;
                            optionaldesc = frontendFields.Value;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(optionaldesc) ? "Optional Description: " + optionaldesc : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = optionaldesc
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = optionaldesc;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        /// <summary>
        ///  Appointment Request Form
        /// </summary>
        /// <param name="idJobDocument">The identifier job document.</param>
        /// <param name="jobDocumentCreateOrUpdateDTO">The job document create or update dto.</param>
        public static void GenerateAppointmentRequestForm(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantMobile = string.Empty;
                string applicantPhone = string.Empty;
                string applicantEmail = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "Business Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantPhone,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantPhone;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Cell Phone")
                        {

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Location Address")
                        {
                            string locationAddress = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = locationAddress,
                                    ActualValue = locationAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = locationAddress;
                                updateJobDocumentField.ActualValue = locationAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Bin")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Community Board")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pre Demolition Inspection")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pre demo Onsite plan")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pre demo TR1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pre demo Is The Requested appoinment")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Demolition Sign off Inspection")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Demo Onsite Plan")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Demo TR 1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Stop Work Order ")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Partial or Full Stop")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Stop Work Order  Complaint Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Violation number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Copies of Violation On site")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Correct the Violation")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "DOB Violation Dismissal")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "DOB Violation Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Dob Correct Violation")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Side Walk Shed Removal")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Partial or Full")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Exterior work completed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Removed from Set Back")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Curtains Walls Completed ")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Equipment been removed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Removal from site safety")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Rem Work been Completed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Rem roof setback")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Rem Walls Completed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Rem Equipment been Removed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Rem Shed been Removed")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        //if (item.Field.FieldName == "Comments")
                        //{
                        //    if (updateJobDocumentField == null)
                        //    {
                        //        JobDocumentField JobDocumentField = new JobDocumentField
                        //        {
                        //            IdJobDocument = idJobDocument,
                        //            IdDocumentField = Convert.ToInt32(item.Id),
                        //            Value = string.Empty,
                        //            ActualValue = string.Empty
                        //        };
                        //        rpoContext.JobDocumentFields.Add(JobDocumentField);
                        //    }
                        //    else
                        //    {
                        //        updateJobDocumentField.Value = string.Empty;
                        //        updateJobDocumentField.ActualValue = string.Empty;
                        //        rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                        //        rpoContext.SaveChanges();
                        //    }
                        //}

                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            //applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            //applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            //applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            //applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;
                            applicantPhone = jobContact != null && jobContact.Contact != null ? jobContact.Contact.WorkPhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;

                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            //applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            //applicantCompanyCity = address != null ? address.City : string.Empty;
                            //applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            //applicantCompanyPhone = address != null ? address.Phone : string.Empty;
                            //applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Job Number")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplication = rpoContext.JobApplications.FirstOrDefault(x => x.Id == applicantId);

                            string applicantNumber = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            GenerateJobDocument(idJobDocument);
        }

        public static void GenerateWaiverofBuildersPaymentRequirement(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street Address")
                        {
                            string housenumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + (job.RfpAddress.Borough != null ? " " + job.RfpAddress.Borough.Description : string.Empty) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = housenumber,
                                    ActualValue = housenumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = housenumber;
                                updateJobDocumentField.ActualValue = housenumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Proposed Work description 1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Proposed Work description 2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Proposed Work description 3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Proposed Work description 4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Proposed Work description 5")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Print")
                        {
                            string namePrint = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = namePrint,
                                    ActualValue = namePrint
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = namePrint;
                                updateJobDocumentField.ActualValue = namePrint;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            //string format = "MMM d yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (updateJobDocumentField == null)
                        {
                            JobDocumentField JobDocumentField = new JobDocumentField
                            {
                                IdJobDocument = idJobDocument,
                                IdDocumentField = frontendFields.IdDocumentField,
                                Value = frontendFields.Value,
                                ActualValue = frontendFields.Value
                            };
                            rpoContext.JobDocumentFields.Add(JobDocumentField);
                            rpoContext.SaveChanges();
                        }
                        else
                        {
                            updateJobDocumentField.Value = frontendFields.Value;
                            updateJobDocumentField.ActualValue = frontendFields.Value;
                            rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                            rpoContext.SaveChanges();
                        }
                    }
                }
            }

            GenerateJobDocument(idJobDocument);
        }

        public static void EditWaiverofBuildersPaymentRequirement(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street Address")
                        {
                            string housenumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + (job.RfpAddress.Borough != null ? " " + job.RfpAddress.Borough.Description : string.Empty) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = housenumber,
                                    ActualValue = housenumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = housenumber;
                                updateJobDocumentField.ActualValue = housenumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name Print")
                        {
                            string namePrint = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = namePrint,
                                    ActualValue = namePrint
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = namePrint;
                                updateJobDocumentField.ActualValue = namePrint;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (updateJobDocumentField == null)
                        {
                            JobDocumentField JobDocumentField = new JobDocumentField
                            {
                                IdJobDocument = idJobDocument,
                                IdDocumentField = frontendFields.IdDocumentField,
                                Value = frontendFields.Value,
                                ActualValue = frontendFields.Value
                            };
                            rpoContext.JobDocumentFields.Add(JobDocumentField);
                            rpoContext.SaveChanges();
                        }
                        else
                        {
                            updateJobDocumentField.Value = frontendFields.Value;
                            updateJobDocumentField.ActualValue = frontendFields.Value;
                            rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                            rpoContext.SaveChanges();
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;

            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateWaiverOfCurbAlignmentAndSidewalkAndCurb(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantPhone = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Prevant Plant RP")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Street Address")
                        {
                            string streetAddress = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + (job.RfpAddress.Borough != null ? " " + job.RfpAddress.Borough.Description : string.Empty) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetAddress,
                                    ActualValue = streetAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetAddress;
                                updateJobDocumentField.ActualValue = streetAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantPhone,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantPhone;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Signature Authorized Representative")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Curb Alignment street1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Curb Alignment street2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Curb Alignment street3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Curb Alignment street4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "SideWalk street1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "SideWalk street2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "SideWalk street3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "SideWalk street4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Applicant Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }

        public static void EditWaiverOfCurbAlignmentAndSidewalkAndCurb(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantPhone = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        
                        if (item.Field.FieldName == "Street Address")
                        {
                            string streetAddress = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + (job.RfpAddress.Borough != null ? " " + job.RfpAddress.Borough.Description : string.Empty) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetAddress,
                                    ActualValue = streetAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetAddress;
                                updateJobDocumentField.ActualValue = streetAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantPhone,
                                    ActualValue = applicantPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantPhone;
                                updateJobDocumentField.ActualValue = applicantPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Applicant Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateRequestforPropertyProfileChangeRequest(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string licenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "House No")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Street Name")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Bin")
                        {
                            string bin = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = bin,
                                    ActualValue = bin
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = bin;
                                updateJobDocumentField.ActualValue = bin;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "CB No.")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floor")
                        {
                            string floor = job != null && job.Applications != null && !string.IsNullOrEmpty(job.Applications.Where(d => d.Id == jobDocument.IdJobApplication).Select(d => d.FloorWorking).FirstOrDefault()) ? job.Applications.Where(d => d.Id == jobDocument.IdJobApplication).Select(d => d.FloorWorking).FirstOrDefault() : string.Empty;
                            //                            string floor = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floor,
                                    ActualValue = floor
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = floor;
                                updateJobDocumentField.ActualValue = floor;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Apt. No.")
                        {
                            string apart = job != null ? job.Apartment: string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = apart,
                                    ActualValue = apart
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = apart;
                                updateJobDocumentField.ActualValue = apart;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "First Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Middle Initial")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Telephone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Mobile")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Licence number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Tidal")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fresh Water")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Coastal")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            //string format = "MMM d yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Choose One")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseType,
                                    ActualValue = licenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = licenseType;
                                updateJobDocumentField.ActualValue = licenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Last Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;

                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ?  item1.ContactLicenseType.Name + "," : string.Empty;
                                                                       
                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if(permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x =>x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseType = "PE";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if(permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseType = "RA";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }

                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            //int id = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //jobContact.Contact.ContactLicenses.Select(x => x.IdContactLicenseType).FirstOrDefault() : 0;
                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.IdContactLicenseType == id).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseType = "PE";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseType = "RA";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseType = "PE";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseType = "RA";
                            //    }
                            //}
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantFirstName + " " + applicantLastName) ? "Applicant: " + applicantFirstName + " " + applicantLastName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value

                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }
        public static void EditGenerateRequestforPropertyProfileChangeRequest(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string licenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "House No")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Street Name")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Bin")
                        {
                            string bin = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = bin,
                                    ActualValue = bin
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = bin;
                                updateJobDocumentField.ActualValue = bin;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "CB No.")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floor")
                        {
                            string floor = job != null && job.Applications != null && !string.IsNullOrEmpty(job.Applications.Where(d=>d.Id== jobDocument.IdJobApplication).Select(d => d.FloorWorking).FirstOrDefault()) ? job.Applications.Where(d => d.Id == jobDocument.IdJobApplication).Select(d => d.FloorWorking).FirstOrDefault() : string.Empty;
                            //                            string floor = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floor,
                                    ActualValue = floor
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = floor;
                                updateJobDocumentField.ActualValue = floor;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Apt. No.")
                        {
                            string apart = job != null ? job.Apartment : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = apart,
                                    ActualValue = apart
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = apart;
                                updateJobDocumentField.ActualValue = apart;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "First Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Middle Initial")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Telephone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Mobile")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Licence number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "Choose One")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseType,
                                    ActualValue = licenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = licenseType;
                                updateJobDocumentField.ActualValue = licenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Last Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;



                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ? item1.ContactLicenseType.Name + "," : string.Empty;

                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if (permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseType = "PE";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if (permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseType = "RA";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }

                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            //int id = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //jobContact.Contact.ContactLicenses.Select(x => x.IdContactLicenseType).FirstOrDefault() : 0;
                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.IdContactLicenseType == id).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseType = "PE";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseType = "RA";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseType = "PE";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseType = "RA";
                            //    }
                            //}
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantFirstName + " " + applicantLastName) ? "Applicant: " + applicantFirstName + " " + applicantLastName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value

                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }


        public static void GenerateEquipmentUsePermitCard(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string airConditioning = string.Empty;
                string heating = string.Empty;
                string refrigeration = string.Empty;
                string ventilation = string.Empty;
                string floorWorkingOn = string.Empty;
                //string applicantCompanyAddress = string.Empty;
                //string applicantCompanyCity = string.Empty;
                //string applicantCompanyState = string.Empty;
                //string applicantCompanyZip = string.Empty;
                //string applicantMobile = string.Empty;
                //string applicantEmail = string.Empty;
                //string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - EUP25A-78408.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "LOCATION")
                        {
                            string location = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = location,
                                    ActualValue = location
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = location;
                                updateJobDocumentField.ActualValue = location;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floor")
                        {
                            string floor = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floorWorkingOn,
                                    ActualValue = floorWorkingOn
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = floorWorkingOn;
                                updateJobDocumentField.ActualValue = floorWorkingOn;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            // string format = "MM/dd/yy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Spec1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Spec2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Spec3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "AC")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = airConditioning,
                                    ActualValue = airConditioning
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = airConditioning;
                                updateJobDocumentField.ActualValue = airConditioning;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "VS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = ventilation,
                                    ActualValue = ventilation
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = ventilation;
                                updateJobDocumentField.ActualValue = ventilation;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "RS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = refrigeration,
                                    ActualValue = refrigeration
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = refrigeration;
                                updateJobDocumentField.ActualValue = refrigeration;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = heating,
                                    ActualValue = heating
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = heating;
                                updateJobDocumentField.ActualValue = heating;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Capacity1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Capacity2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Capacity3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNumber")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;
                            floorWorkingOn = jobApplications != null ? jobApplications.FloorWorking : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Type")
                        {
                            int jobDocumentTypeId = Convert.ToInt32(frontendFields.Value);
                            JobDocumentType jobDocumentType = rpoContext.JobDocumentTypes.FirstOrDefault(x => x.Id == jobDocumentTypeId);

                            string docuementType = jobDocumentType != null ? jobDocumentType.Type : string.Empty;

                            if (docuementType.ToLower() == ("Air Conditioning").ToLower())
                            {
                                airConditioning = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Heating").ToLower())
                            {
                                heating = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Refrigeration").ToLower())
                            {
                                refrigeration = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Ventilation").ToLower())
                            {
                                ventilation = "Yes";
                            }

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(docuementType) ? "Type: " + docuementType : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Optional Description: " + frontendFields.Value : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value

                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }


            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateJobDocument(idJobDocument);
        }
        public static void EditEquipmentUsePermitCard(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string airConditioning = string.Empty;
                string heating = string.Empty;
                string refrigeration = string.Empty;
                string ventilation = string.Empty;
                string floorWorkingOn = string.Empty;
                //string applicantCompanyAddress = string.Empty;
                //string applicantCompanyCity = string.Empty;
                //string applicantCompanyState = string.Empty;
                //string applicantCompanyZip = string.Empty;
                //string applicantMobile = string.Empty;
                //string applicantEmail = string.Empty;
                //string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - EUP25A-78408.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "LOCATION")
                        {
                            string location = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = location,
                                    ActualValue = location
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = location;
                                updateJobDocumentField.ActualValue = location;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floor")
                        {
                            string floor = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floorWorkingOn,
                                    ActualValue = floorWorkingOn
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = floorWorkingOn;
                                updateJobDocumentField.ActualValue = floorWorkingOn;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        
                        
                        else if (item.Field.FieldName == "AC")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = airConditioning,
                                    ActualValue = airConditioning
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = airConditioning;
                                updateJobDocumentField.ActualValue = airConditioning;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "VS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = ventilation,
                                    ActualValue = ventilation
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = ventilation;
                                updateJobDocumentField.ActualValue = ventilation;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "RS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = refrigeration,
                                    ActualValue = refrigeration
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = refrigeration;
                                updateJobDocumentField.ActualValue = refrigeration;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HS")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = heating,
                                    ActualValue = heating
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = heating;
                                updateJobDocumentField.ActualValue = heating;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNumber")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;
                            floorWorkingOn = jobApplications != null ? jobApplications.FloorWorking : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Type")
                        {
                            int jobDocumentTypeId = Convert.ToInt32(frontendFields.Value);
                            JobDocumentType jobDocumentType = rpoContext.JobDocumentTypes.FirstOrDefault(x => x.Id == jobDocumentTypeId);

                            string docuementType = jobDocumentType != null ? jobDocumentType.Type : string.Empty;

                            if (docuementType.ToLower() == ("Air Conditioning").ToLower())
                            {
                                airConditioning = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Heating").ToLower())
                            {
                                heating = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Refrigeration").ToLower())
                            {
                                refrigeration = "Yes";
                            }
                            else if (docuementType.ToLower() == ("Ventilation").ToLower())
                            {
                                ventilation = "Yes";
                            }

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(docuementType) ? "Type: " + docuementType : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Optional Description: " + frontendFields.Value : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value

                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateBuilderPavementPlanChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                //string applicantPhone = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - BPP1-62440.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "6")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "7")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "8")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "9")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "10")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "11")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "12")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "13")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "14")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "15")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "16")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "17")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "18")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "19")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "20")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "21")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "22")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "23")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "24")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "25")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "26")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "27")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "28")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "29")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "30")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "31")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "32")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "33")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Text1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business address:")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "ZIP")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "License No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.Include("Contact").FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            // applicantPhone = jobContact != null && jobContact.Contact != null ? jobContact.Contact.WorkPhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //  Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            //  applicantCompanyPhone = address != null ? address.Phone : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(applicantId),
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(applicantId);
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };

                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }

        public static void EditBuilderPavementPlanChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                //string applicantPhone = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - BPP1-62440.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "First name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business address:")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "ZIP")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "License No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Application Type")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.Include("Contact").FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            // applicantPhone = jobContact != null && jobContact.Contact != null ? jobContact.Contact.WorkPhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //  Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            //  applicantCompanyPhone = address != null ? address.Phone : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(applicantId),
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = Convert.ToString(applicantId);
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };

                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateHIC1HomeImprovementContractorAffidavit(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantName = string.Empty;
                //string applicantMiddelName = string.Empty;
                //string applicantCompanyName = string.Empty;
                //string applicantCompanyPhone = string.Empty;
                //string applicantCompanyAddress = string.Empty;
                //string applicantCompanyCity = string.Empty;
                //string applicantCompanyState = string.Empty;
                //string applicantCompanyZip = string.Empty;
                //string applicantPhone = string.Empty;
                //string applicantEmail = string.Empty;
                //string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Address")
                        {
                            string address = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + " " + job.RfpAddress.ZipCode : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = address,
                                    ActualValue = address
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = address;
                                updateJobDocumentField.ActualValue = address;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box7")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box8")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box9")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box10")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box11")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box12")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box13")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box14")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Text15")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Text18")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HIC1-78414.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.Include("Contact").FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            string applicantFullname = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName + (jobContact.Contact.Company != null ? " - " + jobContact.Contact.Company.Name : string.Empty) : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(applicantName) ? " | " : string.Empty) + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(applicantId),
                                    ActualValue = applicantFullname
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = Convert.ToString(applicantId);
                                updateJobDocumentField.ActualValue = applicantFullname;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "DocNo")
                        {
                            documentDescription = documentDescription + "Doc Number: " + frontendFields.Value;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };

                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateJobDocument(idJobDocument);
        }

        public static void EditGenerateHIC1HomeImprovementContractorAffidavit(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantName = string.Empty;
                //string applicantMiddelName = string.Empty;
                //string applicantCompanyName = string.Empty;
                //string applicantCompanyPhone = string.Empty;
                //string applicantCompanyAddress = string.Empty;
                //string applicantCompanyCity = string.Empty;
                //string applicantCompanyState = string.Empty;
                //string applicantCompanyZip = string.Empty;
                //string applicantPhone = string.Empty;
                //string applicantEmail = string.Empty;
                //string applicantLicenseNumber = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Address")
                        {
                            string address = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street + " " + job.RfpAddress.ZipCode : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = address,
                                    ActualValue = address
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = address;
                                updateJobDocumentField.ActualValue = address;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }

                        else if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HIC1-78414.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Applicant")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.Include("Contact").FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            string applicantFullname = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName + (jobContact.Contact.Company != null ? " - " + jobContact.Contact.Company.Name : string.Empty) : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(applicantName) ? " | " : string.Empty) + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = Convert.ToString(applicantId),
                                    ActualValue = applicantFullname
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = Convert.ToString(applicantId);
                                updateJobDocumentField.ActualValue = applicantFullname;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "DocNo")
                        {
                            documentDescription = documentDescription + "Doc Number: " + frontendFields.Value;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };

                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateRequestforRequestforCertificateofOccupancywithOpenApplicationCoverLetter(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string licenseEngineer = string.Empty;
                string licenseArchitect = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "First Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Middle Initial")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "P.E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseEngineer,
                                    ActualValue = licenseEngineer
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = licenseEngineer;
                                updateJobDocumentField.ActualValue = licenseEngineer;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "R.A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseArchitect,
                                    ActualValue = licenseArchitect
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = licenseArchitect;
                                updateJobDocumentField.ActualValue = licenseArchitect;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "DOB Id No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Licence No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "House no")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sreet Name")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Issue impacting1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Issue impacting2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Issue impacting3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Issue impacting4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Attached Document 1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Attached Document 2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Attached Document 3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Attached Document 4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Comment 1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Comment 2")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Comment 3")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Comment 4")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Job Number")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;


                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ? item1.ContactLicenseType.Name + "," : string.Empty;

                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if (permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseEngineer = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if (permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseArchitect = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }




                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //   jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseEngineer = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseArchitect = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseEngineer = "Yes";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseArchitect = "Yes";
                            //    }
                            //}

                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantFirstName + " " + applicantLastName) ? "Applicant: " + applicantFirstName + " " + applicantLastName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }

        public static void EditRequestforRequestforCertificateofOccupancywithOpenApplicationCoverLetter(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string licenseEngineer = string.Empty;
                string licenseArchitect = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "First Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Middle Initial")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Business Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Email")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "P.E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseEngineer,
                                    ActualValue = licenseEngineer
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = licenseEngineer;
                                updateJobDocumentField.ActualValue = licenseEngineer;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "R.A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = licenseArchitect,
                                    ActualValue = licenseArchitect
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = licenseArchitect;
                                updateJobDocumentField.ActualValue = licenseArchitect;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Licence No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "House no")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sreet Name")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "Job Number")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;



                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ? item1.ContactLicenseType.Name + "," : string.Empty;

                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if (permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseEngineer = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if (permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                licenseArchitect = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }

                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //   jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseEngineer = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseArchitect = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        licenseEngineer = "Yes";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        licenseArchitect = "Yes";
                            //    }
                            //}
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantFirstName + " " + applicantLastName) ? "Applicant: " + applicantFirstName + " " + applicantLastName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateRequestforLL5of1973InformationChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            string address = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = address,
                                    ActualValue = address
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = address;
                                updateJobDocumentField.ActualValue = address;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Centrally AC")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Non Centrally AC")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "High Rise")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Low Rise")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Alteration Number")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sign off from fire dept.")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Provide Sign off")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Amendent for Condition")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Submit Amendent")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other Fire Alarm")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sign off in folder")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        if (item.Field.FieldName == "Elevator Provide Sign off")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Elevator Other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other Elevator")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Submit a report of compliance")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sprinkler submit amendment")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sprinkler Submit Application")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sprinkler sign off")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Sprinkler Other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other Sprinkler")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pressurization submit TR-1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pressurization submit Fire")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Pressurization Other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other Pressurization")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Compartmentation Submit Amendment")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Compartmentation Submit Application")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Compartmentation Submit TR-1")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Compartmentation other")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Other Comparmentation")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Given to")
                        {
                            string givento = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = givento,
                                    ActualValue = givento
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = givento;
                                updateJobDocumentField.ActualValue = givento;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Relation to Owner")
                        {
                            string contactTitle = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null && job.RfpAddress.OwnerContact.ContactTitle != null ? job.RfpAddress.OwnerContact.ContactTitle.Name : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = contactTitle,
                                    ActualValue = contactTitle
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = contactTitle;
                                updateJobDocumentField.ActualValue = contactTitle;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Department of Building")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Comments")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            //string format = "MMM d yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (updateJobDocumentField == null)
                        {
                            JobDocumentField JobDocumentField = new JobDocumentField
                            {
                                IdJobDocument = idJobDocument,
                                IdDocumentField = frontendFields.IdDocumentField,
                                Value = frontendFields.Value,
                                ActualValue = frontendFields.Value
                            };
                            rpoContext.JobDocumentFields.Add(JobDocumentField);
                            rpoContext.SaveChanges();
                        }
                        else
                        {
                            updateJobDocumentField.Value = frontendFields.Value;
                            updateJobDocumentField.ActualValue = frontendFields.Value;
                            rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                            rpoContext.SaveChanges();
                        }
                    }
                }
            }
            GenerateJobDocument(idJobDocument);
        }

        public static void EditRequestforLL5of1973InformationChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();
                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "Borough")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            string address = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = address,
                                    ActualValue = address
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = address;
                                updateJobDocumentField.ActualValue = address;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Given to")
                        {
                            string givento = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null ? job.RfpAddress.OwnerContact.FirstName + " " + job.RfpAddress.OwnerContact.LastName : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = givento,
                                    ActualValue = givento
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = givento;
                                updateJobDocumentField.ActualValue = givento;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Relation to Owner")
                        {
                            string contactTitle = job != null && job.RfpAddress != null && job.RfpAddress.OwnerContact != null && job.RfpAddress.OwnerContact.ContactTitle != null ? job.RfpAddress.OwnerContact.ContactTitle.Name : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = contactTitle,
                                    ActualValue = contactTitle
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = contactTitle;
                                updateJobDocumentField.ActualValue = contactTitle;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (updateJobDocumentField == null)
                        {
                            JobDocumentField JobDocumentField = new JobDocumentField
                            {
                                IdJobDocument = idJobDocument,
                                IdDocumentField = frontendFields.IdDocumentField,
                                Value = frontendFields.Value,
                                ActualValue = frontendFields.Value
                            };
                            rpoContext.JobDocumentFields.Add(JobDocumentField);
                            rpoContext.SaveChanges();
                        }
                        else
                        {
                            updateJobDocumentField.Value = frontendFields.Value;
                            updateJobDocumentField.ActualValue = frontendFields.Value;
                            rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                            rpoContext.SaveChanges();
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateHPD1AntiHarassmentAreaChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string angineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD1-78415.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box27[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box28[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box29[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box30[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box31[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box32[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box33[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box34[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Text35[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box36[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box37[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box38[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box39[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box40[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box41[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box42[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box43[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box44[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box45[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box46[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box47[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box48[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Check_Box49[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            // string format = "MM/dd/yy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //  Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);

                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;


                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();

                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateJobDocument(idJobDocument);
        }

        public static void EditGenerateHPD1AntiHarassmentAreaChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();

            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string angineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD1-78415.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                       
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                       
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                                              
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                      
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //  Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);

                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;


                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();

                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateHPD2ClintonSpecialDistrictAntiHarssmentChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string angineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD2-78422.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box25")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box26")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box27")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box28")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box29")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box30")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box31")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box32")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box33")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box34")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box35")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Text25")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box37")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box38")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box39")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box40")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box41")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box42")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box43")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box44")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box45")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box46")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box47")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box48")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box49")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box50")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box51")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box52")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box53")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box54")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box55")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box56")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box57")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box58")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Check Box59")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            //string format = "MM/dd/yy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            // Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);

                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;
                            
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                          jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();

                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateJobDocument(idJobDocument);
        }

        public static void EditGenerateHPD2ClintonSpecialDistrictAntiHarssmentChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string angineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD2-78422.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                      
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                       
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            // Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);

                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                          jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();

                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }

                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }

        public static void GenerateHPD3SROMultipleDwellingAntiHarssmentChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string architectLicenseType = string.Empty;
                string angineerLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD3-78423.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[1]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[2]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[3]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[4]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[5]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].CheckBox1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[6]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[7]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].RadioButtonList[8]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].CheckBox1[1]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].CheckBox1[2]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Date")
                        {
                            DateTime date = DateTime.Today;
                            //string format = "MM/dd/yy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                               jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }
        public static void EditGenerateHPD3SROMultipleDwellingAntiHarssmentChecklist(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();


                string applicantName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string applicantEmail = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string architectLicenseType = string.Empty;
                string angineerLicenseType = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - HPD3-78423.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "HouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Street")
                        {
                            string streetName = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetName,
                                    ActualValue = streetName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetName;
                                updateJobDocumentField.ActualValue = streetName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Floors")
                        {
                            string stories = job != null && job.RfpAddress != null ? Convert.ToString(job.RfpAddress.Stories) : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = stories,
                                    ActualValue = stories
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = stories;
                                updateJobDocumentField.ActualValue = stories;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Block")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "BIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "CB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "First")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                       
                        else if (item.Field.FieldName == "City")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "State")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "MobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Lic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "E")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = angineerLicenseType,
                                    ActualValue = angineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = angineerLicenseType;
                                updateJobDocumentField.ActualValue = angineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "A")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "Name")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                       
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Last")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;
                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            string applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            //Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;
                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;

                            string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                               jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            if (!string.IsNullOrEmpty(licenceTypeNumber))
                            {
                                ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                                ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                                if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                                else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                    applicantLicenseNumber = licenceTypeNumber;
                                }
                            }
                            else
                            {
                                licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                                if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                                {
                                    angineerLicenseType = "Yes";
                                }
                                else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                                {
                                    architectLicenseType = "Yes";
                                }
                            }
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }
        //ML
        public static void GeneratePF1TreeFundPaymentApplication(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantCompanyName = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantMobile = string.Empty;
                string applicantCompanyZip = string.Empty;
                string crossStreet = string.Empty;
                string applicantEmail = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - PF1-78453.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Fax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Adr_Address")
                        {
                            string streetAddress = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetAddress,
                                    ActualValue = streetAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = streetAddress;
                                updateJobDocumentField.ActualValue = streetAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Adr_CrossStreets")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = crossStreet,
                                    ActualValue = crossStreet
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = crossStreet;
                                updateJobDocumentField.ActualValue = crossStreet;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "SPN")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "OnSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "RefundableDepositOnSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "TreesOnSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "OffSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "TreesOffSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "RefundableDepositOffSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "TreePermitNo")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Month")
                        {
                            DateTime date = DateTime.Now;
                            // string format = "MM";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Day")
                        {
                            DateTime date = DateTime.Now;
                            // string format = "MM";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Year")
                        {
                            DateTime date = DateTime.Now;
                            // string format = "MM";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;
                            crossStreet = jobApplications != null ? jobApplications.StreetWorkingOn + "'\'" + jobApplications.StreetFrom + "'\'" + jobApplications.StreetTo : string.Empty;

                            if (crossStreet.Equals("''''"))
                            {
                                crossStreet = string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            // applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.WorkPhone : string.Empty;
                            applicantMobile = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            // Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 + " " + address.City + " " + address.State.Acronym : string.Empty;
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;


                            documentDescription = "Applicant: " + applicantName;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Optional Description: " + frontendFields.Value : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }


            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();

            GenerateJobDocument(idJobDocument);
        }


        public static void EditPF1TreeFundPaymentApplication(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {

            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ToList();
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;

            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();
                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantCompanyName = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantMobile = string.Empty;
                string applicantCompanyZip = string.Empty;
                string crossStreet = string.Empty;
                string applicantEmail = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {

                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - PF1-78453.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Phone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMobile,
                                    ActualValue = applicantMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMobile;
                                updateJobDocumentField.ActualValue = applicantMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "Company")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Address")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Zip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "EMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Adr_Address")
                        {
                            string streetAddress = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber + " " + job.RfpAddress.Street : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = streetAddress,
                                    ActualValue = streetAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = streetAddress;
                                updateJobDocumentField.ActualValue = streetAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Adr_CrossStreets")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = crossStreet,
                                    ActualValue = crossStreet
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = crossStreet;
                                updateJobDocumentField.ActualValue = crossStreet;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Boro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "OnSite")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "JobNo")
                        {
                            int applicantionId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplications = rpoContext.JobApplications.Include("JobApplicationType").FirstOrDefault(x => x.Id == applicantionId);

                            string applicationNo = jobApplications != null ? jobApplications.ApplicationNumber : string.Empty;
                            crossStreet = jobApplications != null ? jobApplications.StreetWorkingOn + "'\'" + jobApplications.StreetFrom + "'\'" + jobApplications.StreetTo : string.Empty;

                            if (crossStreet.Equals("''''"))
                            {
                                crossStreet = string.Empty;
                            }
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Name")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);

                            string applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantCompanyName = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null ? jobContact.Contact.Company.Name : string.Empty;
                            // applicantMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.WorkPhone : string.Empty;
                            applicantMobile = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            //applicantLicenseNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null ? jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;

                            // Address address = jobContact != null && jobContact.Contact != null && jobContact.Contact.Company != null && jobContact.Contact.Company.Addresses != null ? jobContact.Contact.Company.Addresses.OrderBy(x => x.AddressType.DisplayOrder).FirstOrDefault() : null;
                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 + " " + address.City + " " + address.State.Acronym : string.Empty;
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;


                            documentDescription = "Applicant: " + applicantName;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "Optional Description")
                        {
                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(frontendFields.Value) ? " | " : string.Empty) + (!string.IsNullOrEmpty(frontendFields.Value) ? "Optional Description: " + frontendFields.Value : string.Empty);
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;

            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }
        //ML
        public static void GenerateTechnicalReportBoringTestsResults(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantLastName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string floorWorkingOn = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string applicantCompanyMobile = string.Empty;
                string applicantEmail = string.Empty;
                string engineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                string applicantName = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - TR408-79229.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtHouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtStreet")
                        {
                            string street = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = street,
                                    ActualValue = street
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = street;
                                updateJobDocumentField.ActualValue = street;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBoro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBlock")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtCB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtFloors")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floorWorkingOn,
                                    ActualValue = floorWorkingOn
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = floorWorkingOn;
                                updateJobDocumentField.ActualValue = floorWorkingOn;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtApt")
                        {
                            string aptNo = job != null && job.RfpAddress != null ? job.Apartment : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = aptNo,
                                    ActualValue = aptNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = aptNo;
                                updateJobDocumentField.ActualValue = aptNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtFirst")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtMI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtCompany")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtPhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtAddress")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtFax")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtCity")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtState")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtZip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtMobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyMobile,
                                    ActualValue = applicantCompanyMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantCompanyMobile;
                                updateJobDocumentField.ActualValue = applicantCompanyMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtEMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "chkE")
                        {

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = engineerLicenseType,
                                    ActualValue = engineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = engineerLicenseType;
                                updateJobDocumentField.ActualValue = engineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "chkA")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page1[0].Req_Borings[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_1[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_2[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_3[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_14[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_15[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_16[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_4[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_5[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_6[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_7[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_8[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_9[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_10[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_11[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Remarks__Row_12[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Date__Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Boring_Test_Pit____Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Feet_Below_Curb__Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Soil_Description__Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "topmostSubform[0].Page2[0].Class_Number__Row_13[0]")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtName")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtDate")
                        {
                            DateTime time = DateTime.Now;
                            // string format = "MMM d yyyy";
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = string.Empty,
                                    ActualValue = string.Empty
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = string.Empty;
                                updateJobDocumentField.ActualValue = string.Empty;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "txtJobNo")
                        {
                            int jobApplicantId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplication = rpoContext.JobApplications.FirstOrDefault(x => x.Id == jobApplicantId);

                            string applicationNumber = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                            floorWorkingOn = jobApplication != null ? jobApplication.FloorWorking : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLast")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);
                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;

                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;
                            applicantCompanyMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantCompanyName = jobContact != null && jobContact.Company != null ? jobContact.Company.Name : string.Empty;




                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ? item1.ContactLicenseType.Name + "," : string.Empty;

                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if (permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                engineerLicenseType = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if (permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                architectLicenseType = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }



                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //   jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        engineerLicenseType = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        architectLicenseType = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        engineerLicenseType = "Yes";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        architectLicenseType = "Yes";
                            //    }
                            //}

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(applicantName) ? " | " : string.Empty) + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateJobDocument(idJobDocument);
        }

        public static void EditTechnicalReportBoringTestsResults(int idJobDocument, JobDocumentCreateOrUpdateDTO jobDocumentCreateOrUpdateDTO)
        {
            RpoContext rpoContext = new RpoContext();
            var documentFieldList = rpoContext.DocumentFields.Include("Field").Where(x => x.IdDocument == jobDocumentCreateOrUpdateDTO.IdDocument).OrderByDescending(x => x.Field.IsDisplayInFrontend).ThenBy(x => x.DisplayOrder).ToList();

            JobDocument jobDocument = rpoContext.JobDocuments.FirstOrDefault(x => x.Id == idJobDocument);
            string documentDescription = string.Empty;
            string jobDocumentFor = string.Empty;
            List<IdItemName> FieldsValue = new List<IdItemName>();
            List<string> pdfFields = new List<string>();
            List<int> DocumentFieldsIds = new List<int>();
            if (documentFieldList != null && documentFieldList.Count > 0)
            {
                Job job = rpoContext.Jobs.Include("ProjectManager").
                    Include("Contact.ContactTitle").
                    Include("RfpAddress.Borough").
                    Include("Company.Addresses.AddressType").
                    Include("Company.Addresses.State")
                    .Where(x => x.Id == jobDocumentCreateOrUpdateDTO.IdJob).FirstOrDefault();

                var jobDocumentFieldList = rpoContext.JobDocumentFields.Where(x => x.IdJobDocument == idJobDocument).ToList();

                string applicantLastName = string.Empty;
                string applicantFirstName = string.Empty;
                string applicantMiddelName = string.Empty;
                string applicantCompanyName = string.Empty;
                string applicantCompanyPhone = string.Empty;
                string applicantCompanyAddress = string.Empty;
                string applicantCompanyCity = string.Empty;
                string applicantCompanyState = string.Empty;
                string applicantCompanyZip = string.Empty;
                string applicantMobile = string.Empty;
                string floorWorkingOn = string.Empty;
                string applicantLicenseNumber = string.Empty;
                string applicantCompanyMobile = string.Empty;
                string applicantEmail = string.Empty;
                string engineerLicenseType = string.Empty;
                string architectLicenseType = string.Empty;

                string applicantName = string.Empty;

                foreach (DocumentField item in documentFieldList)
                {
                    JobDocumentField updateJobDocumentField = jobDocumentFieldList.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    var frontendFields = jobDocumentCreateOrUpdateDTO.JobDocumentFields.FirstOrDefault(x => x.IdDocumentField == item.Id);
                    if (frontendFields == null)
                    {
                        if (item.Field.FieldName == "JobFileInfo")
                        {
                            string jobFileInfo = job != null ? job.JobNumber + " - TR408-79229.pdf" : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = jobFileInfo,
                                    ActualValue = jobFileInfo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = jobFileInfo;
                                updateJobDocumentField.ActualValue = jobFileInfo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtHouseNo")
                        {
                            string houseNumber = job != null && job.RfpAddress != null ? job.RfpAddress.HouseNumber : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = houseNumber,
                                    ActualValue = houseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = houseNumber;
                                updateJobDocumentField.ActualValue = houseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtStreet")
                        {
                            string street = job != null && job.RfpAddress != null ? job.RfpAddress.Street : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = street,
                                    ActualValue = street
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = street;
                                updateJobDocumentField.ActualValue = street;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBoro")
                        {
                            string borough = job != null && job.RfpAddress != null && job.RfpAddress.Borough != null ? job.RfpAddress.Borough.Description : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = borough,
                                    ActualValue = borough
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = borough;
                                updateJobDocumentField.ActualValue = borough;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBlock")
                        {
                            string block = job != null && job.RfpAddress != null ? job.RfpAddress.Block : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = block,
                                    ActualValue = block
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = block;
                                updateJobDocumentField.ActualValue = block;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLot")
                        {
                            string lot = job != null && job.RfpAddress != null ? job.RfpAddress.Lot : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = lot,
                                    ActualValue = lot
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = lot;
                                updateJobDocumentField.ActualValue = lot;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtBIN")
                        {
                            string binNumber = job != null && job.RfpAddress != null ? job.RfpAddress.BinNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = binNumber,
                                    ActualValue = binNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = binNumber;
                                updateJobDocumentField.ActualValue = binNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtCB")
                        {
                            string comunityBoardNumber = job != null && job.RfpAddress != null ? job.RfpAddress.ComunityBoardNumber : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = comunityBoardNumber,
                                    ActualValue = comunityBoardNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = comunityBoardNumber;
                                updateJobDocumentField.ActualValue = comunityBoardNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtFloors")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = floorWorkingOn,
                                    ActualValue = floorWorkingOn
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = floorWorkingOn;
                                updateJobDocumentField.ActualValue = floorWorkingOn;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtApt")
                        {
                            string aptNo = job != null && job.RfpAddress != null ? job.Apartment : string.Empty;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = aptNo,
                                    ActualValue = aptNo
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = aptNo;
                                updateJobDocumentField.ActualValue = aptNo;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtFirst")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantFirstName,
                                    ActualValue = applicantFirstName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantFirstName;
                                updateJobDocumentField.ActualValue = applicantFirstName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtMI")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantMiddelName,
                                    ActualValue = applicantMiddelName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantMiddelName;
                                updateJobDocumentField.ActualValue = applicantMiddelName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtCompany")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyName,
                                    ActualValue = applicantCompanyName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyName;
                                updateJobDocumentField.ActualValue = applicantCompanyName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtPhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyPhone,
                                    ActualValue = applicantCompanyPhone
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyPhone;
                                updateJobDocumentField.ActualValue = applicantCompanyPhone;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtAddress")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyAddress,
                                    ActualValue = applicantCompanyAddress
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyAddress;
                                updateJobDocumentField.ActualValue = applicantCompanyAddress;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "txtCity")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyCity,
                                    ActualValue = applicantCompanyCity
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyCity;
                                updateJobDocumentField.ActualValue = applicantCompanyCity;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtState")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyState,
                                    ActualValue = applicantCompanyState
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyState;
                                updateJobDocumentField.ActualValue = applicantCompanyState;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtZip")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyZip,
                                    ActualValue = applicantCompanyZip
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyZip;
                                updateJobDocumentField.ActualValue = applicantCompanyZip;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtMobilePhone")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantCompanyMobile,
                                    ActualValue = applicantCompanyMobile
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantCompanyMobile;
                                updateJobDocumentField.ActualValue = applicantCompanyMobile;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtEMail")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantEmail,
                                    ActualValue = applicantEmail
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantEmail;
                                updateJobDocumentField.ActualValue = applicantEmail;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLic_No")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantLicenseNumber,
                                    ActualValue = applicantLicenseNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantLicenseNumber;
                                updateJobDocumentField.ActualValue = applicantLicenseNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "chkE")
                        {

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = engineerLicenseType,
                                    ActualValue = engineerLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = engineerLicenseType;
                                updateJobDocumentField.ActualValue = engineerLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "chkA")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = architectLicenseType,
                                    ActualValue = architectLicenseType
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = architectLicenseType;
                                updateJobDocumentField.ActualValue = architectLicenseType;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        
                        else if (item.Field.FieldName == "txtName")
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = applicantName,
                                    ActualValue = applicantName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = applicantName;
                                updateJobDocumentField.ActualValue = applicantName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                    else
                    {
                        if (item.Field.FieldName == "txtJobNo")
                        {
                            int jobApplicantId = Convert.ToInt32(frontendFields.Value);
                            JobApplication jobApplication = rpoContext.JobApplications.FirstOrDefault(x => x.Id == jobApplicantId);

                            string applicationNumber = jobApplication != null ? jobApplication.ApplicationNumber : string.Empty;
                            floorWorkingOn = jobApplication != null ? jobApplication.FloorWorking : string.Empty;

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicationNumber
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicationNumber;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "txtLast")
                        {
                            int applicantId = Convert.ToInt32(frontendFields.Value);
                            JobContact jobContact = rpoContext.JobContacts.FirstOrDefault(x => x.Id == applicantId);
                            applicantName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName + " " + jobContact.Contact.LastName : string.Empty;

                            applicantFirstName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.FirstName : string.Empty;
                            applicantLastName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.LastName : string.Empty;
                            applicantMiddelName = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MiddleName : string.Empty;

                            Address address = Common.GetContactAddressForJobDocument(jobContact);
                            applicantCompanyAddress = address != null ? address.Address1 + " " + address.Address2 : string.Empty;
                            applicantCompanyCity = address != null ? address.City : string.Empty;
                            applicantCompanyState = address != null && address.State != null ? " " + address.State.Acronym : string.Empty;

                            applicantCompanyPhone = Common.GetContactPhoneNumberForJobDocument(jobContact);
                            applicantCompanyZip = address != null ? address.ZipCode : string.Empty;
                            applicantCompanyMobile = jobContact != null && jobContact.Contact != null ? jobContact.Contact.MobilePhone : string.Empty;

                            applicantEmail = jobContact != null && jobContact.Contact != null ? jobContact.Contact.Email : string.Empty;
                            applicantCompanyName = jobContact != null && jobContact.Company != null ? jobContact.Company.Name : string.Empty;




                            string licenceTypeNumber = string.Empty;

                            var test = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                                 jobContact.Contact.ContactLicenses.Select(x => x).ToList() : null;
                            string permitTypecode = string.Empty;
                            string test1 = string.Empty;
                            if (test != null)
                            {
                                foreach (var item1 in test)
                                {

                                    permitTypecode += item1.ContactLicenseType != null ? item1.ContactLicenseType.Name + "," : string.Empty;

                                }
                            }
                            string[] permitTypecodeArr = new string[20];
                            permitTypecodeArr = permitTypecode.Split(',').ToArray();

                            var str = Array.FindAll(permitTypecodeArr, s => s.Equals("Engineer"));

                            if (permitTypecodeArr.Contains("Engineer"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Engineer").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                engineerLicenseType = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }
                            else if (permitTypecodeArr.Contains("Architect"))
                            {
                                string licenceTypeNumber1 = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            jobContact.Contact.ContactLicenses.Where(x => x.ContactLicenseType.Name == "Architect").Select(x => x.Number).FirstOrDefault() : string.Empty;
                                architectLicenseType = "Yes";
                                applicantLicenseNumber = licenceTypeNumber1;
                            }



                            //string licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //   jobContact.Contact.ContactLicenses.Select(x => x.Number).FirstOrDefault() : string.Empty;
                            //if (!string.IsNullOrEmpty(licenceTypeNumber))
                            //{
                            //    ContactLicense contactLicenseType = rpoContext.ContactLicenses.Where(a => a.Number == licenceTypeNumber).FirstOrDefault();
                            //    ContactLicenseType LicenseType = rpoContext.ContactLicenseTypes.Where(b => b.Id == contactLicenseType.IdContactLicenseType).FirstOrDefault();
                            //    if (LicenseType.Name.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        engineerLicenseType = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //    else if (LicenseType.Name.ToLower() == ("Architect").ToLower())
                            //    {
                            //        architectLicenseType = "Yes";
                            //        applicantLicenseNumber = licenceTypeNumber;
                            //    }
                            //}
                            //else
                            //{
                            //    licenceTypeNumber = jobContact != null && jobContact.Contact != null && jobContact.Contact.ContactLicenses != null && jobContact.Contact.ContactLicenses.Count > 0 ?
                            //    jobContact.Contact.ContactLicenses.Select(x => x.ContactLicenseType.Name).FirstOrDefault() : string.Empty;
                            //    if (licenceTypeNumber.ToLower() == ("Engineer").ToLower())
                            //    {
                            //        engineerLicenseType = "Yes";
                            //    }
                            //    else if (licenceTypeNumber.ToLower() == ("Architect").ToLower())
                            //    {
                            //        architectLicenseType = "Yes";
                            //    }
                            //}

                            documentDescription = documentDescription + (!string.IsNullOrEmpty(documentDescription) && !string.IsNullOrEmpty(applicantName) ? " | " : string.Empty) + (!string.IsNullOrEmpty(applicantName) ? "Applicant: " + applicantName : string.Empty);

                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = Convert.ToInt32(item.Id),
                                    Value = frontendFields.Value,
                                    ActualValue = applicantLastName
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                            }
                            else
                            {
                                string pdffield = rpoContext.DocumentFields.Where(x => x.IdField == item.IdField).Select(x => x.PdfFields).FirstOrDefault();
                                pdfFields.Add(pdffield);
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = applicantLastName;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                FieldsValue.Add(new IdItemName
                                {
                                    Id = pdffield,
                                    ItemName = updateJobDocumentField.ActualValue
                                });
                                rpoContext.SaveChanges();
                            }
                        }
                        else if (item.Field.FieldName == "For")
                        {
                            jobDocumentFor = frontendFields.Value;
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value,
                                    ActualValue = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }

                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                updateJobDocumentField.ActualValue = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        else
                        {
                            if (updateJobDocumentField == null)
                            {
                                JobDocumentField JobDocumentField = new JobDocumentField
                                {
                                    IdJobDocument = idJobDocument,
                                    IdDocumentField = frontendFields.IdDocumentField,
                                    Value = frontendFields.Value
                                };
                                rpoContext.JobDocumentFields.Add(JobDocumentField);
                                rpoContext.SaveChanges();
                            }
                            else
                            {
                                updateJobDocumentField.Value = frontendFields.Value;
                                rpoContext.Entry(updateJobDocumentField).State = EntityState.Modified;
                                rpoContext.SaveChanges();
                            }
                        }
                        rpoContext.SaveChanges();
                    }
                }
            }
            List<string> newpdfString = pdfFields;
            List<int> newDocumentFieldId = DocumentFieldsIds;
            jobDocument.DocumentDescription = documentDescription;
            jobDocument.JobDocumentFor = jobDocumentFor;
            rpoContext.SaveChanges();
            GenerateEditedJobDocument(idJobDocument, pdfFields, newDocumentFieldId, FieldsValue);
        }
    }
}